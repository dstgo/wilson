import{b as A,u as V,p as k,q as P,_ as q}from"./index.819b1795.js";import{d as U,e as h,aW as z,r as N,b1 as R,b5 as L,bh as M,bk as j,b9 as G,B as J,E as d,aN as K,aK as e,aJ as o,aG as Q,bi as T,bj as W,A as H,u as F,aM as w,ba as O,bb as X}from"./arco.1d3b24cf.js";import{u as Y,j as Z}from"./vue.2f04a2ac.js";import{u as $}from"./loading.ac3cf47a.js";import"./chart.2c91a5c5.js";const B=n=>(T("data-v-d18a316c"),n=n(),W(),n),ee={class:"login-form-wrapper"},oe=B(()=>d("div",{class:"login-form-title"},"\u6B22\u8FCE\u767B\u9646 \u{1F44B}\u{1F3FB}",-1)),se=B(()=>d("div",{class:"login-form-sub-title"},"\u8F93\u5165\u60A8\u7684\u8D26\u53F7\u5BC6\u7801\u4EE5\u5F00\u59CB\u4F7F\u7528\u914D\u7F6E\u4E2D\u5FC3",-1)),ae={class:"login-form-error-msg"},ue={class:"login-form-password-actions"},te=U({__name:"login",setup(n){const g=h(null),l=Y(),f=h(""),{loading:b,setLoading:v}=$(),y=A();V();const s=Z("login-config",{rememberPassword:!0,username:"",password:""});z(()=>{clearInterval(g.value),g.value=null});const t=N({username:s.value.username,password:s.value.password}),C=async({errors:c,values:a})=>{if(!b.value&&!c){v(!0);try{await y.login(a);const{redirect:u,...i}=l.currentRoute.value.query;u&&l.hasRoute(u)?l.push({name:u,query:{...i}}):l.push({path:"/",query:{...i}}),Q.success("\u767B\u9646\u6210\u529F");const{rememberPassword:r}=s.value,{username:m,password:_}=a;s.value.username=r?m:"",s.value.password=r?_:""}catch(u){f.value=u.message}finally{v(!1)}}},E=c=>{s.value.rememberPassword=c};return(c,a)=>{const u=k,i=R,r=O,m=P,_=X,I=L,S=M,x=j,D=G;return H(),J("div",ee,[oe,se,d("div",ae,K(f.value),1),e(D,{model:t,class:"login-form",layout:"vertical",onSubmit:C},{default:o(()=>[e(r,{field:"username",rules:[{required:!0,message:"\u8D26\u6237\u4E0D\u80FD\u4E3A\u7A7A"}],"validate-trigger":["change","blur"],"hide-label":""},{default:o(()=>[e(i,{modelValue:t.username,"onUpdate:modelValue":a[0]||(a[0]=p=>t.username=p),size:"large",placeholder:"\u8BF7\u8F93\u5165\u8D26\u6237"},{prefix:o(()=>[e(u)]),_:1},8,["modelValue"])]),_:1}),e(r,{field:"password",rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"}],"validate-trigger":["change","blur"],"hide-label":""},{default:o(()=>[e(_,{modelValue:t.password,"onUpdate:modelValue":a[1]||(a[1]=p=>t.password=p),size:"large",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801","allow-clear":"",autocomplete:""},{prefix:o(()=>[e(m)]),_:1},8,["modelValue"])]),_:1}),e(x,{size:16,direction:"vertical"},{default:o(()=>[d("div",ue,[e(I,{checked:"rememberPassword","model-value":F(s).rememberPassword,onChange:E},{default:o(()=>[w("\u8BB0\u4F4F\u5BC6\u7801")]),_:1},8,["model-value","onChange"])]),e(S,{size:"large",type:"primary","html-type":"submit",long:"",loading:F(b)},{default:o(()=>[w("\u767B\u5F55")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])}}});const de=q(te,[["__scopeId","data-v-d18a316c"]]);export{de as default};
